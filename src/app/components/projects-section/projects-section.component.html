<section [id]="sectionId" class="section">
  <div class="section-head">
    <h2>{{ title }}</h2>
    <p>{{ description }}</p>
  </div>

  <div
    class="project-grid"
    [class.collapsible]="enableCollapse"
    [class.collapsed]="enableCollapse && !isExpanded"
    [class.expanded]="enableCollapse && isExpanded"
  >
    @for (project of projects; track project.title) {
      <article class="card">
        <img [src]="project.image_url" [alt]="project.title + ' preview image'" loading="lazy" />
        <div class="card-body">
          <h3>{{ project.title }}</h3>
          <p>{{ project.description }}</p>

          @if (project.tags?.length) {
            <ul class="tags">
              @for (tag of project.tags; track tag) {
                <li>{{ tag }}</li>
              }
            </ul>
          }

          <div class="project-links">
            <a [href]="project.github_link" target="_blank" rel="noopener noreferrer">GitHub</a>
            @if (project.live_link) {
              <a [href]="project.live_link" target="_blank" rel="noopener noreferrer">Live Demo</a>
            }
          </div>
        </div>
      </article>
    }
  </div>

  @if (enableCollapse && projects.length > 0) {
    <div class="project-actions">
      <button type="button" class="read-more" (click)="toggleExpanded()">
        {{ isExpanded ? 'Show less' : 'Read more' }}
      </button>
    </div>
  }
</section>
